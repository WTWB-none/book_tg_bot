# –û—Ç–ª–∞–¥–∫–∞ Telegram Mini App

## –ü—Ä–æ–±–ª–µ–º–∞: ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ –ø–æ–¥—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç—Å—è

### üîç –ö–∞–∫ –æ—Ç–ª–∞–¥–∏—Ç—å:

1. **–û—Ç–∫—Ä–æ–π—Ç–µ –æ—Ç–ª–∞–¥–æ—á–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É:**

   ```
   https://your-site.netlify.app/debug
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ DevTools (F12)
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É Console
   - –ò—â–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏—è:
     - "Telegram WebApp initialized:"
     - "Using Telegram user ID:"
     - "Checking subscription for user ID:"

### üêõ –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:

#### 1. **Telegram WebApp –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è**

```
Not running in Telegram WebApp
```

**–†–µ—à–µ–Ω–∏–µ:** –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç–µ —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫—É –≤ Telegram –±–æ—Ç–µ, –∞ –Ω–µ –Ω–∞–ø—Ä—è–º—É—é –≤ –±—Ä–∞—É–∑–µ—Ä–µ.

#### 2. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω**

```
user: null
```

**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –±–æ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ BotFather –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç HTTPS URL.

#### 3. **ID –Ω–µ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è**

```
No user ID available
```

**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤ Telegram WebApp –µ—Å—Ç—å `initDataUnsafe.user.id`.

### üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ —Å–¥–µ–ª–∞–Ω—ã:

1. **–û–∂–∏–¥–∞–Ω–∏–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ Telegram:**

   - –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ `isTelegramReady`
   - Auth store –∂–¥–µ—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–µ—Ä–µ–¥ –ø—Ä–æ–≤–µ—Ä–∫–æ–π –ø–æ–¥–ø–∏—Å–∫–∏

2. **–£–ª—É—á—à–µ–Ω–Ω–∞—è –æ—Ç–ª–∞–¥–∫–∞:**

   - –î–æ–±–∞–≤–ª–µ–Ω—ã console.log –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞
   - –°–æ–∑–¥–∞–Ω–∞ –æ—Ç–ª–∞–¥–æ—á–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ `/debug`

3. **–û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π router guard:**
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Mini App (–ø–æ–ª—É—á–µ–Ω–∏–µ UID –∏–∑ Telegram)
   - Fallback –Ω–∞ URL –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏

### üì± –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:

#### –í Telegram:

1. –û—Ç–∫—Ä–æ–π—Ç–µ –±–æ—Ç–∞ –≤ Telegram
2. –ù–∞–∂–º–∏—Ç–µ `/start` –∏–ª–∏ `/catalog`
3. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "üìö –û—Ç–∫—Ä—ã—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫—É"
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—Ç–ª–∞–¥–æ—á–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É: `/debug`

#### –í–Ω–µ Telegram (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏):

1. –û—Ç–∫—Ä–æ–π—Ç–µ `https://your-site.netlify.app/?uid=793857218`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—Ç–ª–∞–¥–æ—á–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É: `/debug`

### üîç –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ –æ—Ç–ª–∞–¥–æ—á–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ:

1. **–°–æ—Å—Ç–æ—è–Ω–∏–µ Telegram WebApp:**

   - –ì–æ—Ç–æ–≤: –î–∞/–ù–µ—Ç
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å ID –∏ –∏–º—è
   - User ID: –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —á–∏—Å–ª–æ–º

2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∫–∏:**

   - –°—Ç–∞—Ç—É—Å: –ü–æ–¥–ø–∏—Å–∞–Ω/–ù–µ –ø–æ–¥–ø–∏—Å–∞–Ω
   - –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ: –î–∞/–ù–µ—Ç

3. **URL –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**

   - UID –∏–∑ URL: –¥–ª—è fallback —Ä–µ–∂–∏–º–∞

4. **Telegram WebApp –æ–±—ä–µ–∫—Ç:**
   - –î–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ

### üö® –ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ—Ç–∞ –≤ BotFather:**

   - URL –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å HTTPS
   - URL –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–µ–Ω

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ Netlify:**

   - `TELEGRAM_BOT_TOKEN`
   - `TRIBUTE_API_KEY`
   - `ADMIN_USER_IDS`

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Netlify Functions:**
   - Netlify Dashboard ‚Üí Functions ‚Üí View logs
   - –ò—â–∏—Ç–µ –æ—à–∏–±–∫–∏ –≤ API –≤—ã–∑–æ–≤–∞—Ö

### üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞:

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –Ω–µ —Ä–µ—à–∞–µ—Ç—Å—è, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤—å—Ç–µ:

1. –°–∫—Ä–∏–Ω—à–æ—Ç –æ—Ç–ª–∞–¥–æ—á–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
2. –õ–æ–≥–∏ –∏–∑ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞
3. –õ–æ–≥–∏ –∏–∑ Netlify Functions
4. URL –≤–∞—à–µ–≥–æ —Å–∞–π—Ç–∞
